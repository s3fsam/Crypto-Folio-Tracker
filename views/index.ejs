<h2>Cryptocurrency Prices</h2>
<div id="crypto-prices">
  <!-- Les prix des cryptomonnaies seront affichés ici -->
</div>
<button id="refresh-button">Refresh Cryptocurrencies</button> <!-- Bouton de rafraîchissement -->
<script>
  fetch('https://api.coingecko.com/api/v3/simple/price?ids=bitcoin,ethereum&vs_currencies=usd')
    .then(response => response.json())
    .then(data => {
      const bitcoinPrice = data.bitcoin.usd;
      const ethereumPrice = data.ethereum.usd;
      document.getElementById('crypto-prices').innerHTML = `
        <p>Bitcoin Price: $${bitcoinPrice}</p>
        <p>Ethereum Price: $${ethereumPrice}</p>
      `;
    })
    .catch(error => console.error('Error fetching crypto prices:', error));

  document.getElementById('refresh-button').addEventListener('click', () => {
    // Appeler la route d'API pour rafraîchir les cryptomonnaies dans la base de données
    fetch('/refresh-cryptocurrencies')
      .then(response => {
        if (response.ok) {
          alert('Cryptocurrencies refreshed successfully!');
        } else {
          alert('Failed to refresh cryptocurrencies. Please try again later.');
        }
      })
      .catch(error => {
        console.error('Error refreshing cryptocurrencies:', error);
        alert('An error occurred while refreshing cryptocurrencies. Please try again later.');
      });
  });
</script>

<h3>Select a Cryptocurrency</h3>
<select id="crypto-list">
  <% cryptos.forEach(function(crypto) { %>
    <option value="<%= crypto.id %>"><%= crypto.name %></option>
  <% }); %>
</select>
